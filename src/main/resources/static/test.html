<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>用户表单 CRUD</title>
        <!-- 引入 Axios -->
        <script src="/js/axios.min.js"></script>
    </head>
    <body>
        <h1>Axios CRUD Demo</h1>
        <h2>User Form</h2>
        <form id="userForm">
            <label>用户名：<input type="text" id="username" /></label><br />
            <label>密码：<input type="password" id="password" /></label><br />
            <label>邮箱：<input type="email" id="email" /></label><br />
        </form>
        <br>
        <button id="btnCreate">创建用户</button>

        <p>
            <label><input type="number" id="userId" placeholder="请输入用户ID"></label>
        </p>
        <button id="btnRead">读取用户</button>
        <button id="btnUpdate">更新用户</button>
        <button id="btnDelete">删除用户</button>



        <script>
            //打包数据
            // function getData() {
            //     return{
            //         username: document.getElementById("username").value,
            //         password: document.getElementById("password").value,
            //         email: document.getElementById("email").value
            //     };
            // }
            const getData = () => {
                return{
                    userName: document.getElementById("username").value,
                    password: document.getElementById("password").value,
                    email: document.getElementById("email").value
                };
            }

            document.querySelector('#btnCreate').addEventListener('click',()=>{
                const user = getData();
                console.log("User created.");
                //axios发起异步请求
                axios.post('http://localhost:8088/user',user).then((result) => {    //成功回调函数
                    console.log(result.data);
                }).catch((err) => {    //失败回调函数
                    console.log(err);
                })
            })

            document.querySelector('#btnRead').addEventListener('click',()=>{
                const id = document.getElementById('userId').value;
                console.log("User Found.");
                //axios发起异步请求
                axios.get(`http://localhost:8088/user/${id}`).then((result) => {    //成功回调函数
                    console.log(result.data);
                }).catch((err) => {    //失败回调函数
                    console.log(err);
                })
            })

            document.querySelector('#btnUpdate').addEventListener('click',()=>{
                const user = getData();
                const id = document.getElementById('userId').value;
                console.log("User Updated.");
                //axios发起异步请求
                axios.put(`http://localhost:8088/user/${id}`,user).then((result) => {    //成功回调函数
                    console.log(result.data);
                }).catch((err) => {    //失败回调函数
                    console.log(err);
                })
            })

            document.querySelector('#btnDelete').addEventListener('click',()=>{
                const id = document.getElementById('userId').value;
                console.log("User Deleted.");
                //axios发起异步请求
                axios.delete(`http://localhost:8088/user/${id}`).then((result) => {    //成功回调函数
                    console.log(result.data);
                }).catch((err) => {    //失败回调函数
                    console.log(err);
                })
            })

            // 在这里编写你的 axios 请求代码
            // 示例：
            // axios.get('...')
            //   .then(response => console.log(response.data))
            //   .catch(error => console.error(error));

        </script>
    </body>
</html>
